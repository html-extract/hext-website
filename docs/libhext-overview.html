<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Hext &mdash; libhext C++ library overview</title>
    <meta name="description" content="Implementation details of the libhext C++ library">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="canonical" href="https://hext.thomastrapp.com/libhext-overview">

    
    <link rel="stylesheet" href="assets/combined.min.css">
    <script src="assets/combined.min.js"></script>
    

  </head>
  <body>

    <noscript>
      <div class="ui warning message no-radius">
        <div class="ui center aligned page container">
          <div class="header">
            Site requires Javascript
          </div>
          Syntax highlighting and the Hext editor won't work without Javascript.
        </div>
      </div>
    </noscript>

    <div class="ui main-menu">
      <div class="large-only ui container">
        <div class="ui inverted labeled icon four item stackable menu">
          <a href="/"
             class="item"
             ><img class="logo" alt="Hext" src="assets/img/hext-logo.png"></a>
          <a href="/documentation"
             class="item"
             ><i class="student icon"></i> Documentation</a>
          <a href="/download"
             class="item"
             ><i class="download icon"></i>Get Hext</a>
          <a href="https://github.com/html-extract/hext"
             class="item"><i class="github icon"></i>Github</a>
        </div>
      </div>
      <div class="small-only">
        <div class="ui one item compact menu">
          <a href="/"
             class="item"
             ><img class="logo" alt="Hext" src="assets/img/hext-logo.png"></a>
        </div>
        <div class="ui inverted labeled icon four item compact menu">
          <a href="/documentation"
             class="item"
             ><i class="student icon"></i> Docs</a>
          <a href="/download"
             class="item"
             ><i class="download icon"></i>Get Hext</a>
          <a href="https://github.com/html-extract/hext"
             class="item"><i class="github square icon"></i>Github</a>
        </div>
      </div>
    </div>

    <main class="ui stackable grid container page-libhext-overview">
<div class="ui grid">
  <div class="sixteen wide column">
    <h1>libhext C++ library overview</h1>
    <p>
      Libhext is the C++ library that is the building block of Hext.
      Hext is a domain-specific language for extracting structured data from HTML
      documents. The language itself is explained in its
      <a href="/documentation">documentation</a>.
      Also, you can try hext from the comfort of your browser <a href="/">here</a>.<br>
      libhext's code documentation is available <a href="/libhext-documentation">here</a>.
    </p>
    <h3 class="bottom-attached">
      There are two ways to use libhext:
    </h3>
    <ul>
      <li>One is by using
          <a href="/libhext-documentation/namespacehext.html#a2871f049cdcd9735bae88da6c993e5a2">
          hext::ParseHext</a>, which parses a string containing Hext and returns
          an object of type
          <a href="/libhext-documentation/classhext_1_1Rule.html">
          hext::Rule</a>. Rules match and capture HTML elements.
          </li>
      <li>The other way is by constructing a hext::Rule
          manually. This allows
          building your own matching criteria (by extending
          <a href="/libhext-documentation/classhext_1_1Match.html">
          hext::Match</a>)
          and extraction mechanisms (by extending
          <a href="/libhext-documentation/classhext_1_1Capture.html">
          hext::Capture</a>). Take a look at <a href="#cpp-doc-section-overview">2. Overview of libhext</a> and
          <a href="#cpp-doc-section-building-rules">3. Building rules manually</a>.
          </li>
    </ul>
    <a name="using-parsehext"></a>
    <h3>1. Using hext::ParseHext</h3>
    <p>
      If Hext offers all the features you require, this is the way to go.
      The following example constructs a simple rule that extracts links
      containing images from HTML documents.
    </p>
    <pre class="ace-static-hl"><code><div class='ace-clouds'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;hext/ParseHext.h&#62;</span>
</div><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;hext/Html.h&#62;</span>
</div><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;iostream&#62;</span>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_storage ace_type'>int</span> <span class='ace_identifier'>main</span><span class='ace_paren ace_lparen'>(</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>  <span class='ace_comment'>// Build a rule that extracts links containing images</span>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>rule</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>ParseHext</span><span class='ace_paren ace_lparen'>(</span><span class='ace_string'>"&#60;a href:link @text:title&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"  &#60;img src:image /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;/a&#62;"</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Some example HTML input</span>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>html</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>Html</span><span class='ace_paren ace_lparen'>(</span>
</div><div class='ace_line'>    <span class='ace_string'>"&#60;a href='/coffee'&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;#1&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;Coffee&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;img src='coffee.jpg' /&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;turns nights into code&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"&#60;/a&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"&#60;a href='/beer'&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;#2&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;Beer&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;img src='beer.jpg' /&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"  &#60;span&#62;improves dance skill by 70%&#60;/span&#62;"</span>
</div><div class='ace_line'>    <span class='ace_string'>"&#60;/a&#62;"</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Do the actual extraction. Rule::extract returns</span>
</div><div class='ace_line'>  <span class='ace_comment'>// a std::vector&#60;std::multimap&#60;std::string, std::string&#62;&#62;</span>
</div><div class='ace_line'>  <span class='ace_comment'>// where each multimap contains a complete rule match.</span>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>results</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>rule</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>extract</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>html</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Print all key-value pairs from each rule match</span>
</div><div class='ace_line'>  <span class='ace_keyword ace_control'>for</span><span class='ace_paren ace_lparen'>(</span><span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>result</span> <span class='ace_punctuation ace_operator'>:</span> <span class='ace_identifier'>results</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'>  <span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>    <span class='ace_keyword ace_control'>for</span><span class='ace_paren ace_lparen'>(</span><span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>pair</span> <span class='ace_punctuation ace_operator'>:</span> <span class='ace_identifier'>result</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>cout</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_identifier'>pair</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>first</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_string'>": "</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_identifier'>pair</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>second</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_string'>"\n"</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>    <span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>cout</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_string'>"\n"</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>  <span class='ace_paren ace_rparen'>}</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Output:</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   image: coffee.jpg</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   link: /coffee</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   title: #1 Coffee turns nights into code</span>
</div><div class='ace_line'>  <span class='ace_comment'>//</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   image: beer.jpg</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   link: /beer</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   title: #2 Beer improves dance skill by 70%</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_keyword ace_control'>return</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_paren ace_rparen'>}</span>
</div></div></div></code></pre>
    <a name="cpp-doc-section-overview"></a>
    <h3>2. Overview of libhext</h3>
    <p class="bottom-attached">
      Before diving into an example, let's introduce some components that
      are exposed by libhext's public API.<br>
      If you are in a rush take a look at
      <a href="#cpp-doc-section-extendable-types">4. Overview of libhext's extendable types</a> at the bottom of this page.
    </p>
    <ul>
      <li><a href="/libhext-documentation/classhext_1_1Rule.html">
          <b>hext::Rule</b></a>:
          As seen above, Rules are at the center of it all. Rules contain all
          the information that is required to match and capture data.
          Rules are trees: A Rule may have children and siblings, which
          themselves are Rules. Each Rule contains a vector of hext::Match and
          hext::Capture, these are responsible for matching and capturing
          individual HTML elements.<br>
          Rule::extract expects an object of type hext::Html and returns a
          <a href="/libhext-documentation/namespacehext.html#abca4e3b5f19e70e13c69ec771aabb75a">
          hext::Result</a>, which is a type alias for
          std::vector&lt;std::multimap&lt;std::string, std::string&gt;&gt;.
          Each multimap contains a complete Rule tree match, where each string
          pair contains the name and value returned by a Capture.</li>
      <li><a href="/libhext-documentation/classhext_1_1Html.html">
          <b>hext::Html</b></a>: hext::Html's constructor expects a const char *
          containing UTF-8 encoded HTML. hext::Html does not copy the buffer,
          therefore the buffer must outlive the object.
          </li>
      <li><a href="/libhext-documentation/classhext_1_1Match.html">
          <b>hext::Match</b></a>:
          This is the common base class for all matching mechanisms in Hext,
          with the exception of HTML tags, which are matched by the rule itself.
          You can create your own by inheriting Match and overriding
          <a href="/libhext-documentation/classhext_1_1Match.html#ab7d5a70bb35cdf1d3a0346b3229e9f12">
          Match::matches</a>.
          Rules accept Matches via
          <a href="/libhext-documentation/classhext_1_1Rule.html#a9796a79b76cfcbd8dc047872a5e66d85">
          Rule::append_match.</a><br>
          The following subclasses of Match are available out of the box:
          <a href="/libhext-documentation/classhext_1_1AttributeCountMatch.html">
          AttributeCountMatch</a>,
          <a href="/libhext-documentation/classhext_1_1AttributeMatch.html">
          AttributeMatch</a>,
          <a href="/libhext-documentation/classhext_1_1ChildCountMatch.html">
          ChildCountMatch</a>,
          <a href="/libhext-documentation/classhext_1_1FunctionMatch.html">
          FunctionMatch</a>,
          <a href="/libhext-documentation/classhext_1_1FunctionValueMatch.html">
          FunctionValueMatch</a>,
          <a href="/libhext-documentation/classhext_1_1NegateMatch.html">
          NegateMatch</a>,
          <a href="/libhext-documentation/classhext_1_1NthChildMatch.html">
          NthChildMatch</a> and
          <a href="/libhext-documentation/classhext_1_1OnlyChildMatch.html">
          OnlyChildMatch</a>.</li>
      <li><a href="/libhext-documentation/classhext_1_1Capture.html">
          <b>hext::Capture</b></a>:
          This is the common base class for all capture mechanisms in Hext.
          As with hext::Match you can create your own by inheriting Capture.
          Rules accept Captures via
          <a href="/libhext-documentation/classhext_1_1Rule.html#ad1d274edbbabce814dfd24b7386a73c6">
          Rule::append_capture</a>.<br>
          Captures may extract one name-value pair. A capture's name does not
          have to be unique.
          There are two subclasses of hext::Capture available out of the box:
          <a href="/libhext-documentation/classhext_1_1AttributeCapture.html">
          AttributeCapture</a>, which extracts content from an HTML element's
          attribute and
          <a href="/libhext-documentation/classhext_1_1Capture.html">
          FunctionCapture</a>, which captures the result of a function that
          accepts HTML elements as its argument.</li>
      <li><a href="/libhext-documentation/classhext_1_1StringPipe.html">
          <b>hext::StringPipe</b></a>:
          Both AttributeCapture and FunctionCapture may be given a StringPipe.
          StringPipes transform a string before it is captured. For example,
          there is
          <a href="/libhext-documentation/classhext_1_1CollapseWsPipe.html">
          hext::CollapseWsPipe</a>
          which trims and collapses whitespace in a string, or
          <a href="/libhext-documentation/classhext_1_1RegexPipe.html">
          hext::RegexPipe</a> which filters a string according to a regular
          expression. StringPipes are linked lists and may therefore be chained.
          <br>The following subclasses of StringPipe are available out of the
          box:
          <a href="/libhext-documentation/classhext_1_1AppendPipe.html">
          AppendPipe</a>,
          <a href="/libhext-documentation/classhext_1_1CasePipe.html">
          CasePipe</a>,
          <a href="/libhext-documentation/classhext_1_1CollapseWsPipe.html">
          CollapseWsPipe</a>,
          <a href="/libhext-documentation/classhext_1_1PrependPipe.html">
          PrependPipe</a>,
          <a href="/libhext-documentation/classhext_1_1RegexPipe.html">
          RegexPipe</a>,
          <a href="/libhext-documentation/classhext_1_1RegexReplacePipe.html">
          RegexReplacePipe</a> and
          <a href="/libhext-documentation/classhext_1_1TrimPipe.html">
          TrimPipe</a>.</li>
      <li><a href="/libhext-documentation/classhext_1_1ValueTest.html">
          <b>hext::ValueTest</b></a>: ValueTests are an easy way to match HTML
          elements by the contents of an attribute or by the result of a
          built-in function. You can create your own by inheriting
          ValueTest and overriding
          <a href="/libhext-documentation/classhext_1_1ValueTest.html#a3015d285de5e887571362501efc37724">
          ValueTest::test</a>.
          ValueTests are passed to the constructor of FunctionValueMatch or
          AttributeMatch.<br>
          The following subclasses of ValueTest are available out of the box:
          <a href="/libhext-documentation/classhext_1_1BeginsWithTest.html">
          BeginsWithTest</a>,
          <a href="/libhext-documentation/classhext_1_1ContainsTest.html">
          ContainsTest</a>,
          <a href="/libhext-documentation/classhext_1_1ContainsWordsTest.html">
          ContainsWordsTest</a>,
          <a href="/libhext-documentation/classhext_1_1EndsWithTest.html">
          EndsWithTest</a>,
          <a href="/libhext-documentation/classhext_1_1EqualsTest.html">
          EqualsTest</a>,
          <a href="/libhext-documentation/classhext_1_1NegateTest.html">
          NegateTest</a>,
          <a href="/libhext-documentation/classhext_1_1RegexTest.html">
          RegexTest</a>.</li>
      <li><a href="/libhext-documentation/classhext_1_1AttributeMatch.html">
          <b>hext::AttributeMatch</b></a>:
          An AttributeMatch is a Match that decides whether an HTML element
          matches by looking at one specific HTML attribute. The actual
          comparison is delegated to a hext::ValueTest.
          Can not be inherited (use composition).</li>
      <li><a href="/libhext-documentation/classhext_1_1FunctionValueMatch.html">
          <b>hext::FunctionValueMatch</b></a>:
          A FunctionValueMatch calls a function and passes the result to a
          ValueTest. The type of function is a
          <a href="/libhext-documentation/namespacehext.html#a5da82824b39cd1cadf23304cbb7d0e8e">
          hext::CaptureFunction</a>, which is a
          typedef for std::function&lt;std::string (const GumboNode *)&gt;: A
          function that accepts a GumboNode and returns a std::string.
          Libhext exposes
          <a href="https://github.com/google/gumbo-parser">Gumbo</a>,
          an HTML5 parsing library written in C99. This is where the GumboNode
          is coming from. Gumbo is an incredible piece of work and very well
          <a href="https://github.com/google/gumbo-parser/blob/master/src/gumbo.h">
          documented</a>.<br>
          Libhext comes with three <a href="/libhext-documentation/Builtins_8h.html">
          built-in functions</a>: TextBuiltin, InnerHtmlBuiltin and
          StripTagsBuiltin.</li>
      <li><a href="/libhext-documentation/classhext_1_1Cloneable.html">
          <b>hext::Cloneable</b></a>:
          Cloneable is a
          <a href="https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern">
          CRTP</a> that provides a clone function which calls the copy constructor
          of its subclass.</li>
      <li><a href="/libhext-documentation/namespacehext.html#a5a0dc11dee920f412f90bc68be1cc010">
          <b>hext::HtmlTag</b></a>:
          An enum containing all valid HTML tags, plus HtmlTag::ANY, which
          matches any HTML tag (translates to &lt;* /&gt; in Hext).</li>
    </ul>
    <a name="cpp-doc-section-building-rules"></a>
    <h3>3. Building rules manually &mdash; An example</h3>
    <p>
      Hext offers ways to match
      <a href="/documentation#match-operators">HTML attributes</a>,
      <a href="/documentation#element-traits">element traits</a>
      and the result of
      <a href="/documentation#builtin-functions">built-in functions</a>
      against a regex or a string literal. But lets just say for the sake of
      this example that you have this huge database of filenames, and you only
      want to match &lt;img&gt; elements whose src attribute contains one of
      these filenames.
    </p>
    <pre class="ace-static-hl"><code><div class='ace-clouds'><div class='ace_static_highlight' style='counter-reset:ace_line 0'><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;hext/Hext.h&#62;</span> <span class='ace_comment'>// include all of hext</span>
</div><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;iostream&#62;</span>
</div><div class='ace_line'><span class='ace_keyword'>#include</span><span class='ace_constant ace_other'> &#60;unordered_set&#62;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_storage ace_type'>class</span> <span class='ace_identifier'>DatabaseTest</span> <span class='ace_punctuation ace_operator'>:</span> <span class='ace_storage ace_modifier'>public</span> <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>Cloneable</span><span class='ace_keyword ace_operator'>&#60;</span><span class='ace_identifier'>DatabaseTest</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>ValueTest</span><span class='ace_keyword ace_operator'>&#62;</span>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'><span class='ace_storage ace_modifier'>public</span><span class='ace_punctuation ace_operator'>:</span>
</div><div class='ace_line'>  <span class='ace_identifier'>DatabaseTest</span><span class='ace_paren ace_lparen'>(</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'>  <span class='ace_punctuation ace_operator'>:</span> <span class='ace_identifier'>database_</span><span class='ace_paren ace_lparen'>({</span><span class='ace_string'>"water.jpg"</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_string'>"beer.jpg"</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_string'>"wine.jpg"</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_string'>"milk.jpg"</span><span class='ace_paren ace_rparen'>})</span>
</div><div class='ace_line'>  <span class='ace_paren ace_lparen'>{</span><span class='ace_paren ace_rparen'>}</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>bool</span> <span class='ace_identifier'>test</span><span class='ace_paren ace_lparen'>(</span><span class='ace_storage ace_modifier'>const</span> <span class='ace_storage ace_type'>char</span> <span class='ace_keyword ace_operator'>*</span> <span class='ace_identifier'>value</span><span class='ace_paren ace_rparen'>)</span> <span class='ace_storage ace_modifier'>const</span> <span class='ace_identifier'>override</span>
</div><div class='ace_line'>  <span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>    <span class='ace_keyword ace_control'>return</span> <span class='ace_variable ace_language'>this</span><span class='ace_keyword ace_operator'>-&#62;</span><span class='ace_identifier'>database_</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>count</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>string</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>value</span><span class='ace_paren ace_rparen'>))</span> <span class='ace_keyword ace_operator'>&#62;</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>  <span class='ace_paren ace_rparen'>}</span>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_storage ace_modifier'>private</span><span class='ace_punctuation ace_operator'>:</span>
</div><div class='ace_line'>  <span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>unordered_set</span><span class='ace_keyword ace_operator'>&#60;</span><span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>string</span><span class='ace_keyword ace_operator'>&#62;</span> <span class='ace_identifier'>database_</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_paren ace_rparen'>}</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>
</div><div class='ace_line'><span class='ace_storage ace_type'>int</span> <span class='ace_identifier'>main</span><span class='ace_paren ace_lparen'>(</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_paren ace_lparen'>{</span>
</div><div class='ace_line'>  <span class='ace_comment'>// Construct a rule that matches &#60;img&#62; elements</span>
</div><div class='ace_line'>  <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>Rule</span> <span class='ace_identifier'>rule</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>HtmlTag</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>IMG</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>  <span class='ace_identifier'>rule</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>append_match</span><span class='ace_keyword ace_operator'>&#60;</span><span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>AttributeMatch</span><span class='ace_keyword ace_operator'>&#62;</span><span class='ace_paren ace_lparen'>(</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_comment'>// that have an attribute called "src"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"src"</span><span class='ace_punctuation ace_operator'>,</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_comment'>// whose value returns true for DatabaseTest::test.</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span><span class='ace_indent-guide'>    </span>  <span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>make_unique</span><span class='ace_keyword ace_operator'>&#60;</span><span class='ace_identifier'>DatabaseTest</span><span class='ace_keyword ace_operator'>&#62;</span><span class='ace_paren ace_lparen'>(</span><span class='ace_paren ace_rparen'>))</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// If this rule matches, store the attribute "alt" as "title"</span>
</div><div class='ace_line'>  <span class='ace_identifier'>rule</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>append_capture</span><span class='ace_keyword ace_operator'>&#60;</span><span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>AttributeCapture</span><span class='ace_keyword ace_operator'>&#62;</span><span class='ace_paren ace_lparen'>(</span><span class='ace_string'>"alt"</span><span class='ace_punctuation ace_operator'>,</span> <span class='ace_string'>"title"</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Example input. Imagine this is a huge document with many</span>
</div><div class='ace_line'>  <span class='ace_comment'>// elements in between.</span>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>html</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>hext</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>Html</span><span class='ace_paren ace_lparen'>(</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='beer.jpg'     alt='Beer'     /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='tea.jpg'      alt='Tea'      /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='pilsener.jpg' alt='Pilsener' /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='weizen.jpg'   alt='Weizen'   /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='wine.jpg'     alt='Wine'     /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='juice.jpg'    alt='Juice'    /&#62;"</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_string'>"&#60;img src='milk.jpg'     alt='Milk'     /&#62;"</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>results</span> <span class='ace_keyword ace_operator'>=</span> <span class='ace_identifier'>rule</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>extract</span><span class='ace_paren ace_lparen'>(</span><span class='ace_identifier'>html</span><span class='ace_paren ace_rparen'>)</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Print all key-value pairs from each rule match</span>
</div><div class='ace_line'>  <span class='ace_keyword ace_control'>for</span><span class='ace_paren ace_lparen'>(</span><span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>result</span> <span class='ace_punctuation ace_operator'>:</span> <span class='ace_identifier'>results</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'>    <span class='ace_keyword ace_control'>for</span><span class='ace_paren ace_lparen'>(</span><span class='ace_storage ace_type'>auto</span> <span class='ace_identifier'>pair</span> <span class='ace_punctuation ace_operator'>:</span> <span class='ace_identifier'>result</span><span class='ace_paren ace_rparen'>)</span>
</div><div class='ace_line'><span class='ace_indent-guide'>    </span>  <span class='ace_identifier'>std</span><span class='ace_punctuation ace_operator'>::</span><span class='ace_identifier'>cout</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_identifier'>pair</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>first</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_string'>": "</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_identifier'>pair</span><span class='ace_punctuation ace_operator'>.</span><span class='ace_identifier'>second</span> <span class='ace_keyword ace_operator'>&#60;&#60;</span> <span class='ace_string'>"\n"</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_comment'>// Output:</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   title: Beer</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   title: Wine</span>
</div><div class='ace_line'>  <span class='ace_comment'>//   title: Milk</span>
</div><div class='ace_line'>
</div><div class='ace_line'>  <span class='ace_keyword ace_control'>return</span> <span class='ace_constant ace_numeric'>0</span><span class='ace_punctuation ace_operator'>;</span>
</div><div class='ace_line'><span class='ace_paren ace_rparen'>}</span>
</div></div></div></code></pre>
    <a name="cpp-doc-section-extendable-types"></a>
    <h3>4. Overview of libhext's extendable types</h3>
    <p>
      The following four abstract base classes can be extended to build your
      own matching and extraction mechanisms.
    </p>
    <table class="ui striped table">
      <thead>
        <tr>
          <th>Type</th>
          <th>Gets received by</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="top aligned">
            <a href="/libhext-documentation/classhext_1_1Match.html">hext::Match</a><br>
            A Match decides whether a single HTML element is matching.
          </td>
          <td>
<ul class="ui list">
  <li>
    <div style="color:#008000">// Move a unique_ptr containing your Match
    type into a Rule:</div>
    <a href="/libhext-documentation/classhext_1_1Rule.html#a9796a79b76cfcbd8dc047872a5e66d85">
    Rule&amp; &nbsp;&nbsp;Rule::append_match(unique_ptr&lt;Match&gt;
    match);</a>
  </li>
  <li>
    <div style="color:#008000">// Let a Rule construct and append your Match
    type:</div>
    <a href="/libhext-documentation/classhext_1_1Rule.html#acf40499289b71a2ec8af980bbbf33bd0">
    Rule&amp; &nbsp;&nbsp;Rule::append_match&lt;Match&gt;(Args&amp;&amp;...
    arg);</a>
  </li>
</ul>
          </td>
        </tr>
        <tr>
          <td class="top aligned">
            <a href="/libhext-documentation/classhext_1_1Capture.html">hext::Capture</a><br>
            A Capture extracts one key-value pair from a single HTML element.
          </td>
          <td>
<ul class="ui list">
  <li>
    <div style="color:#008000">// Move a unique_ptr containing your Capture
    type into a Rule:</div>
    <a href="/libhext-documentation/classhext_1_1Rule.html#ad1d274edbbabce814dfd24b7386a73c6">
      Rule&amp; &nbsp;&nbsp;Rule::append_capture(unique_ptr&lt;Capture&gt;
      cap);</a>
  </li>
  <li>
    <div style="color:#008000">// Let a Rule construct and append your Capture
    type:</div>
    <a href="/libhext-documentation/classhext_1_1Rule.html#a0dae253dcea3ce45bc75a40cbe4ae4dd">
      Rule&amp; &nbsp;&nbsp;Rule::append_capture&lt;Capture&gt;(Args&amp;&amp;...
      arg);</a>
  </li>
</ul>
          </td>
        </tr>
        <tr>
          <td class="top aligned">
            <a href="/libhext-documentation/classhext_1_1ValueTest.html">hext::ValueTest</a><br>
            A ValueTests checks whether a string has a certain content.
          </td>
          <td>
<ul class="ui list">
  <li>
    <div style="color:#008000">// Construct an AttributeMatch with your
    ValueTest type:</div>
    <a href="/libhext-documentation/classhext_1_1AttributeMatch.html#ae114a358ef6f5e8a0573f299aae5beaa">
      AttributeMatch( ... , unique_ptr&lt;ValueTest&gt; value_test);</a>
  </li>
  <li>
    <div style="color:#008000">// Construct a FunctionValueMatch with your
    ValueTest type:</div>
    <a href="/libhext-documentation/classhext_1_1FunctionValueMatch.html#a4cfb904b845b872c1de7e124a3bc80ef">
      FunctionValueMatch( ... , unique_ptr&lt;ValueTest&gt; value_test);</a>
  </li>
</ul>
          </td>
        </tr>
        <tr>
          <td class="top aligned">
  <a href="/libhext-documentation/classhext_1_1StringPipe.html">
    hext::StringPipe</a>
  <br>
  A StringPipe is a linked list that transforms strings.
          </td>
          <td>
<ul class="ui list">
  <li>
    <div style="color:#008000">// Construct an AttributeCapture with your
    StringPipe type:</div>
    <a href="/libhext-documentation/classhext_1_1AttributeCapture.html#a520f4cbbeee5712c262738839f7c3349">
      AttributeCapture( ... , unique_ptr&lt;StringPipe&gt; pipe);</a>
  </li>
  <li>
    <div style="color:#008000">// Construct a FunctionCapture with your
    StringPipe type:</div>
    <a href="/libhext-documentation/classhext_1_1FunctionCapture.html#a348db437596f7ab3b8b40005ce0e26f5">
      FunctionCapture( ... , unique_ptr&lt;StringPipe&gt; pipe);</a>
  </li>
</ul>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <u>Note:</u> When inheriting these types you'll need to override the pure
      virtual function "clone". The easiest way to do this is by inheriting
      <a href="/libhext-documentation/classhext_1_1Cloneable.html">
      hext::Cloneable</a>. Cloneable is a
      <a href="https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern">
      CRTP</a> that provides a clone function which calls the copy constructor
      of its subclass. For example, to extend hext::Match you can inherit
      hext::Cloneable&lt;YourType, hext::Match&gt; instead of inheriting
      hext::Match directly.
    </p>
  </div>
</div>

    </main>

    <div class="ui inverted segment footer">
      <div class="ui about-questions two column stackable grid container">
        <div class="column">
          <div class="ui two column grid">
            <div class="three wide column">
              <h3>How?</h3>
            </div>
            <div class="thirteen wide column">
              <p class="slim"><b>Hext</b> was built with
                 C++,
                 <a href="https://github.com/google/gumbo-parser">Gumbo</a>,
                 <a href="https://www.colm.net/open-source/ragel/">Ragel</a>,
                 <a href="http://www.boost.org/">Boost</a>,
                 <a href="https://github.com/miloyip/rapidjson">RapidJSON</a>,
                 <a href="https://github.com/google/googletest">Google Test</a>,
                 <a href="http://www.doxygen.org/">doxygen</a> and
                 <a href="https://cmake.org/">CMake</a>.
              </p>
              <p><b>This page</b> was cobbled together with
                 <a href="https://jekyllrb.com/">Jekyll</a>,
                 <a href="http://semantic-ui.com/">Semantic UI</a>,
                 <a href="https://jquery.com/">jQuery</a>,
                 <a href="http://ace.c9.io/">Ace Code Editor</a> and
                 <a href="https://github.com/boostorg/beast">Boost.Beast</a>,
                 which powers the "Try Hext in your Browser!" section.
              </p>
            </div>
          </div>
        </div>
        <div class="column">
          <div class="ui two column grid">
            <div class="three wide column">
              <h3>Who?</h3>
            </div>
            <div class="thirteen wide column">
              <p>I'm <a href="http://thomastrapp.com/">Tom</a>,
                 a programmer from Munich and I did all this!<br>
                 Leave a message: <script type="text/javascript">eval(unescape('%64%6f%63%75%6d%65%6e%74%2e%77%72%69%74%65%28%27%3c%61%20%68%72%65%66%3d%22%6d%61%69%6c%74%6f%3a%68%65%78%74%40%74%68%6f%6d%61%73%74%72%61%70%70%2e%63%6f%6d%22%3e%68%65%78%74%40%74%68%6f%6d%61%73%74%72%61%70%70%2e%63%6f%6d%3c%2f%61%3e%27%29'))</script><noscript style="color:red">Please enable Javascript to display email address</noscript>
               </p>
            </div>
            <div class="three wide column">
              <h3>Hext?</h3>
            </div>
            <div class="thirteen wide column">
               <p>
                 The word "<b>Hext</b>" is a combination of "<b>HTML</b>" and
                 "<b>extraction</b>".
                 The German adjective "<b>ver</b>·<b>hext</b>"
                 may be translated to "<b>bewitched</b>" or "<b>hexed</b>".
                 <i><a href="https://en.wiktionary.org/wiki/hexen">
                 &raquo; Wiktionary</a></i>
              </p>
            </div>
          </div>
        </div>
        <div class="center aligned sixteen wide column">
          <b>Imprint/Impressum/This site is operated by:</b><br>
          <a href="https://thomastrapp.com/">Thomas&nbsp;Trapp</a>
          ·&nbsp;Rümannstr.&nbsp;61 ·&nbsp;80804&nbsp;München
          ·&nbsp;<script type="text/javascript">eval(unescape('%64%6f%63%75%6d%65%6e%74%2e%77%72%69%74%65%28%27%3c%61%20%68%72%65%66%3d%22%6d%61%69%6c%74%6f%3a%68%65%78%74%40%74%68%6f%6d%61%73%74%72%61%70%70%2e%63%6f%6d%22%3e%68%65%78%74%40%74%68%6f%6d%61%73%74%72%61%70%70%2e%63%6f%6d%3c%2f%61%3e%27%29'))</script><noscript style="color:red">Please enable Javascript to display email address</noscript><br>

<noscript>Please enable Javascript to display the privacy policy.</noscript>
<script type="text/javascript">
if( location.hostname == "hext.thomastrapp.com" )
  document.write("<b>Datenschutzerklärung:</b><br>Es werden keine personenbezogenen Daten erhoben, ausgewertet oder an Dritte weitergegeben.<br><b>Privacy Policy:</b><br>No personal data is collected, evaluated or relayed to a third party.<br>");
else
  document.write('<b>Datenschutzerklärung:</b><br>Diese Seite wird durch <a href="https://github.com/">Github</a> (Github Pages) bereitgestellt. Github protokolliert Zugriffe.<br>Siehe <a href="https://help.github.com/en/articles/github-privacy-statement">Github\'s Datenschutzerklärung</a>. Einen Mirror ohne Logging gibt es <a href="https://hext.thomastrapp.com/">hier</a>.<br><b>Privacy Policy:</b><br>This site is hosted by <a href="https://github.com/">Github</a> (Github Pages). Github records access.<br>Refer to <a href="https://help.github.com/en/articles/github-privacy-statement">Github\'s Privacy Policy</a>. A mirror without logging can be found <a href="https://hext.thomastrapp.com/">here</a>.<br>');
</script>
        </div>
      </div>
    </div>
  </body>
</html>
